(function(){
  var app = angular.module('swarm',[]);
  



  app.controller('SwarmController', function(){
    
  });//end of 'SwarmController'
  
  app.controller('PanelController', ['$scope' ,function($scope){
    
    // Inital values for the form inputs
    $scope.arrityOpts = [3,4,5,6,7,8,9,10];
    $scope.arrity = $scope.arrityOpts[2];
    $scope.gridScaleOpts = [1,2,3,4,5,6,7,8,9,10];
    $scope.gridScale = $scope.gridScaleOpts[5];
    $scope.swarmSizeOpts = [0,1,2,5,10,20,30,40,50,100];
    $scope.swarmSize = $scope.swarmSizeOpts[2];
    $scope.popSizeOpts = [1,2,5,10,20,30,40,50,100];
    $scope.popSize = $scope.popSizeOpts[4];
    $scope.foodAmountOpts = [5,10,20,30];
    $scope.foodAmount = $scope.foodAmountOpts[1];
    $scope.runningFlag=false;
    
	var squares_map="......................................................................................................iiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiii....iiiiiii..iiiiiiiiiiiiiiiii..iiiiiiiiiiii..iiii....ii..iiiiiiiiiiiiiiiii.......iiiiii..iiii..iiii....ii..iii..iiiiiiiiiiii.......iiiiii..iiiiiiiiii....iiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..........iiii.......iiiiiiiiiiiiiiiiiiiiiiiiiiiii..........iiii.......iiiiiii..................iiii....iiiiiiiiiiiiiiiiiiiiiiii..................iiii....iiiiiiiiiiiiiiiiiiiiiiii..................iiii....iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii....iiiiiii..iiiiii...iiiiiiiiiiiiiiiiiiiiiiiiiiii....iiiiiii..iiiiii...iiii..iiiiiiiiiiiiiiiiiiiiii....iiiiiiiiiiiiiii...iiii..iiiiiii....iiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiiiiiiiiiiii...................i..........iiiiiiiiiiiiiiiiiiiiii.................i..........iiiiiiiiiiii...iiiiiiiiiiiiiiiiiiii....iiiiiiiiiiiiii....iiiii...iiiiiiiiiiiiiiiiiiii....iiiiiiiiiiiiii....iiiii...iiiiiiiiiiiiiiiiiiii....iii....iiiiiii....iiiii...iii..iiiiiiiiiiiiiii....iii....iiiiiiiiiiiiiiii...iii..iiiiiiiiiiiiiii....iii....iiiiiiiiiiiiiiii...iiiiiiii..iiiiiiiiii....iii....iiiiiiiiiiiiiiii...iiiiiiii................iiiiiiiiiiiiiiiiiiiiiii...iiiiiiii................iiiiiiiiiiiiii....iiiii...iii..iii..iiiiiiiiii....iiiiiiiiiiiiii....iiiii...iii..iii..iiiiiiiiii....iiiiiiiiiiiiii....iiiii...iiiiiiii..iiiiiiiiii....iiiiiiiiiii.......i..ii...iii..iii..iiiiiiiiii....iii...iiiii.......i..ii...iii..iii..iiii..iiii....iii...iiiii.......iiiii...iiiiiiii..iiii..iiii....iii...iiiiiiiiiiiiiiiii...iiiiiiii..iiiiiiiiii....iii...iiiiiiiii...iiiii...iii..iii..iiiiiiiiii....iii...iiiii...i...iiiii...iii..iiiiiiiiiiiiiii....iii...iiiii...i...iiiii...iiiiiiiiiiiiiiiiiiii....iii...iiiii...iiiiiiiii...iiiiiiiiiiiiiiiiiiii....iii...iiiii...iiiiiiiii...iiiiiiiiiiiiiiiiiiii....iii...iiiii...iiiiiiiii...iiiiiii.........iiii....iii...iiiii...iiiiiiiii...iiiiiii.........iiii....iii...iiiii...iiiiiiiii...iiiiiii..iiiiiiiiiii....iii...iiiiiiiiiiiiiiiii...iiiiiii..iiiiiiiiiii....iii...iiiiiiiiiiiii..iiiiiiii..ii..ii..iiiiiii....iii...iiiiiiiiiiiii..iiiiiiii..ii..ii.....iiii....iii...iiii.....iiii..ii...iii..iiiiiii.......i....iii...iiii.....iiii..ii...iii..iiiiiiiii..........iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii.......iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii........................................................................................................";
	var blob_map="..........................................................................................................................................................................................................iiiiiiiiiiiiiiiiiiiiiiii........iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiiiii........iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiiiii........iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiiiii........iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiiiii........iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiiiii........iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiiiii........iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiiiii........iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii........iiiiiii........iiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii........iiiiiii........iiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii........iiiiiii........iiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii........iiiiiii........iiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii........iiiiiii........iiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii........iiiiiii........iiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii........iiiiiii........iiiiiiiiiiiii....iiiiiiiiiiiiiiiii.....iiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiii........iiiiiii........iiiiiiiiiiiii..........................iiiiiiiiii.........iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..........................iiiiiiiiii............iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..........................iiiiiiiiii...............iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..........................iiiiiiiiii................iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..........................iiiiiiiiii.................iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..........................iiiiiiiiii..................iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..........................iiiiiiiiii....................iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii....iiiiiiii..............iiiiiiiiii....................iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii....iiiiiiii..............iiiiiiiiii....................iiiiiiii.......iiiiiiiiiiiiiiiiiiiiiiiiiiiii....iiiiiiii..............iiiiiiiiii....................iiiiiiii........iiiiiiiiiiiiiiiiiiiiiiiiiiii....iiiiiiii..............iiiiiiiiii..............iiiiiiiiiiiiii..........iiiiiiiiiiiiiiiiiiiiiiiiii....iiiiiiii..............iiiiiiiiii..............iiiiiiiiiiiiii............iiiiiiiiiiiiiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..............iiiiiiiiiiiiii.............iiiiiiiiiiiiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii.............iiiiiiiiiiiiii.............iiiiiiiiiiiiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii...........iiiiiiiiiiiiiii............iiiiiiiiiiiiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..........iiiiiiiiiiiiiii............iiiiiiiiiiiiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii.........iiiiiiiiiiiiiii............iiiiiiiiiiiiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii.......iiiiiiiiiiiiiii............iiiiiiiiiiiiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii............iiiiiiiii............iiiiiiiiiiiiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii............iiiiiiiii............iiiiiiiiiiiiiiiiiiiiiii....iiiiiiiii.....................iiiiiiiiiii...........iiiiiiiii............iiiiiiiiiiiiiiiiiiiiiii....iiiiiiii......................iiiiiiiiiiii..........iiiiiiiii............iiiiiiiiiiiiiiiiiiiiiii....iiiiiiii......................iiiiiiiiiiiiiiiiiiiiiiiiiiiiiii............iiiiiiiiiiiiiiiiiiiiiii....iiiiiiii...........iiiiiiii...iiiiiiiiiiiiiiiiiiiiiiiiiiiiiii............iiiiiiiiiiiiiiiiiiiiiii.......................iiiiiiii...iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii........iiiii.......................iiiiiiii...iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii........iiiii.......................iiiiiiii...iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii........iiiii.......................iiiiiiii...iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii........iiiii.......................iiiiiiii...iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii........iiiii.................iiiiiiiiiiiiii...iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii........iiiii....iiiiiiiiiiiiiiiiiiiiiiiiiii...iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii........iiiii....iiiiiiiiiiiiiiiiiiiiii........iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii........iiiii....iiiiiiiiiiiiiiiiiiiiii........iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiii........iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiii........iiiiiiiiiiiii....................................iiiiiiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiii........iiiiiiiiiiiii....................................iiiiiiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiii.......iiiiiiiiiiiiii....................................iiiiiiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiii......iiiiiiiiiiiiiii....................................iiiiiiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiii.....iiiiiiiiiiiiiiii.............iiiiiiii...............iiiiiiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiii.....iiiiiiiiiiiiiiii.............iiiiiiii...............iiiiiiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiii.....iiiiiiiiiiiiiiii.............iiiiiiii...............iiiiiiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiii.....iiiiiiiiiiiiiiii.............iiiiiiii...............iiiiiiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiii.....iiiiiiiiiiiiiiii.............iiiiiiii...............iiiiiiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiii.....iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiii.....iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiii.....iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiii.....iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiii.....iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiii.....iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiii.....iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiii.....iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiii.....iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiii.....iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii....iiiiiiiiiiiiiiiiiii........iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii........iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiiiiiiiiiiii........iiiiiiiiiiiiii........iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiiiiiiiiiiii........iiiiiiiiiiiiii........iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiiiiiiiiiiii........iiiiiiiiiiiiii........iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii....iiiiiii........iiiiiiiiiiiiiiii........iiiiiiiiiiiiii........iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii....iiiiiii........iiiiiiiiiiiiiiii........iiiiiiiiiiiiii........iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii....iiiiiii........iiiiiiiiiiiiiiii........iiiiiiiiiiiiii........iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii....iiiiiii..........iiiiiiiiiiiiii........iiiiiiiiiiiiii.........iiiiiiiiiiiiiii........iiiiiiiiiii....iiiiiii................................iiiiiiiiiiiiii.........iiiiiiiiiiiiiii........iiiiiiiiiii....iiiiiii................................iiiiiiiiiiiiii.........iiiiiiiiiiiiiii........iiiiiiiiiii....iiiiiii................................iiiiiiiiiiiiii.........iiiiiiiiiiiiiii........iiiiiiiiiii....iiiiiii................................iiiiiiiiiiiiii.........iiiiiiiiiiiiiii........iiiiiiiiiii....iiiiiii................................iiiiiiiiiiiiii..........iiiiiiiiiiiiii........iiiiiiiiiii....iiiiiii................................iiiiiiiiiiiiii..........iiiiiiiiiiiiii........iiiiiiiiiii....iiiiiii................................iiiiiiiiiiiiii..........iiiiiiiiiiiiii........iiiiiiiiiii....iiiiiii................................iiiiiiiiiiiiiii.........iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii....iiiiiii..........iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii.........iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii....iiiiiii........iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii.........iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii....iiiiiii........iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii.........iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii........iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii........iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii........iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii....iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii........iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..........................................................................................................................................................................................................";
    var roundten_map=".....................................................................................................iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii....iiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii.........iiiiii.......iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii............iiiiii..........iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiii...............iiiiii.............iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiii.................iiiiii...............iiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiii...................iiiiii.................iiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiii....................iiiiii..................iiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiii......................iiiiii....................iiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiii...................iiiiiiiiiiii...................iiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiii................iiiiiiiiiiiiiiiiiiii................iiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiii................iiiiiiiiiiiiiiiiiiiiiiii................iiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiii..............iiiiiiiiiiiiiiiiiiiiiiiiiiiiii..............iiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiii..............iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..............iiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiii.............iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii.............iiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiii.............iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii.............iiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiii...........iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii...........iiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiii...........iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii...........iiiiiiiiiiiiiiiii..iiiiiiiiiiiiii...........iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii...........iiiiiiiiiiiiiiii..iiiiiiiiiiiii...........iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii...........iiiiiiiiiiiiiii..iiiiiiiiiiiii..........iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..........iiiiiiiiiiiiiii..iiiiiiiiiiii..........iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..........iiiiiiiiiiiiii..iiiiiiiiiii...........iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii...........iiiiiiiiiiiii..iiiiiiiiiii..........iiiiiiiiiiiiiiiiiiiiiii..iiiiii.iiiiiiiiiiiiiiiiiiiiii..........iiiiiiiiiiiii..iiiiiiiiii..........iiiiiiiiiiiiiiiiiiiii.....iiiiii....iiiiiiiiiiiiiiiiiiii..........iiiiiiiiiiii..iiiiiiiiii..........iiiiiiiiiiiiiiiiiii.......iiiiii......iiiiiiiiiiiiiiiiii..........iiiiiiiiiiii..iiiiiiiii..........iiiiiiiiiiiiiiiiiii........iiiiii.......iiiiiiiiiiiiiiiiii..........iiiiiiiiiii..iiiiiiiii..........iiiiiiiiiiiiiiiii..........iiiiii.........iiiiiiiiiiiiiiii..........iiiiiiiiiii..iiiiiiiii.........iiiiiiiiiiiiiiiii...........iiiiii..........iiiiiiiiiiiiiiii.........iiiiiiiiiii..iiiiiiii..........iiiiiiiiiiiiiiii...........iiiiiii...........iiiiiiiiiiiiiii..........iiiiiiiiii..iiiiiiii.........iiiiiiiiiiiiiiiii.........iiiiiiiiiii.........iiiiiiiiiiiiiiii.........iiiiiiiiii..iiiiiiii.........iiiiiiiiiiiiiiii........iiiiiiiiiiiiiii........iiiiiiiiiiiiiii.........iiiiiiiiii..iiiiiii..........iiiiiiiiiiiiiii........iiiiii.....iiiiii........iiiiiiiiiiiiii..........iiiiiiiii..iiiiiii.........iiiiiiiiiiiiiiii.......iiiii.........iiiii.......iiiiiiiiiiiiiii.........iiiiiiiii..iiiiiii.........iiiiiiiiiiiiiii........iiii...........iiii........iiiiiiiiiiiiii.........iiiiiiiii..iiiiiii.........iiiiiiiiiiiiiii.......iiiiii..........iiiii.......iiiiiiiiiiiiii.........iiiiiiiii..iiiiiii.........iiiiiiiiiiiiii.......iiii..ii........ii.iiii.......iiiiiiiiiiiii.........iiiiiiiii..iiiiii.........iiiiiiiiiiiiiii.......iii...ii.......ii...iii.......iiiiiiiiiiiiii.........iiiiiiii..iiiiii.........iiiiiiiiiiiiiii.......iii....ii.....ii....iii.......iiiiiiiiiiiiii.........iiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii......ii...ii......iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii.......ii.ii.......iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii........iii........iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii........iii........iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii........iii........iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii.......ii.ii.......iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiii.........iiiiiiiiiiiiii.......iii......ii...ii......iii.......iiiiiiiiiiiii.........iiiiiiii..iiiiii.........iiiiiiiiiiiiii........iii....ii.....ii....iii........iiiiiiiiiiiii.........iiiiiiii..iiiiii.........iiiiiiiiiiiiii........iii...ii.......ii...iii........iiiiiiiiiiiii.........iiiiiiii..iiiiii..........iiiiiiiiiiiiii.......iiii.ii........ii..iiii.......iiiiiiiiiiiii..........iiiiiiii..iiiiiii.........iiiiiiiiiiiiii........iiiii..........iiiiii........iiiiiiiiiiiii.........iiiiiiiii..iiiiiii.........iiiiiiiiiiiiii.........iiii...........iiii.........iiiiiiiiiiiii.........iiiiiiiii..iiiiiii.........iiiiiiiiiiiiiii........iiiii.........iiiii........iiiiiiiiiiiiii.........iiiiiiiii..iiiiiii..........iiiiiiiiiiiiii.........iiiiii.....iiiiii.........iiiiiiiiiiiii..........iiiiiiiii..iiiiiii..........iiiiiiiiiiiiiii.........iiiiiiiiiiiiiii.........iiiiiiiiiiiiii..........iiiiiiiii..iiiiiiii.........iiiiiiiiiiiiiii...........iiiiiiiiiii...........iiiiiiiiiiiiii.........iiiiiiiiii..iiiiiiii..........iiiiiiiiiiiiiii............iiiiiii............iiiiiiiiiiiiii..........iiiiiiiiii..iiiiiiii..........iiiiiiiiiiiiiiii............iiiiii...........iiiiiiiiiiiiiii..........iiiiiiiiii..iiiiiiiii..........iiiiiiiiiiiiiii............iiiiii...........iiiiiiiiiiiiii..........iiiiiiiiiii..iiiiiiiii..........iiiiiiiiiiiiiiii...........iiiiii..........iiiiiiiiiiiiiii..........iiiiiiiiiii..iiiiiiiii...........iiiiiiiiiiiiiiii..........iiiiii.........iiiiiiiiiiiiiii...........iiiiiiiiiii..iiiiiiiiii..........iiiiiiiiiiiiiiiiii........iiiiii.......iiiiiiiiiiiiiiiii..........iiiiiiiiiiii..iiiiiiiiii...........iiiiiiiiiiiiiiiiii.......iiiiii......iiiiiiiiiiiiiiiii...........iiiiiiiiiiii..iiiiiiiiiii...........iiiiiiiiiiiiiiiiiii.....iiiiii....iiiiiiiiiiiiiiiiii...........iiiiiiiiiiiii..iiiiiiiiiii...........iiiiiiiiiiiiiiiiiiiiii..iiiiii.iiiiiiiiiiiiiiiiiiiii...........iiiiiiiiiiiii..iiiiiiiiiiii...........iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii...........iiiiiiiiiiiiii..iiiiiiiiiiiii...........iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii...........iiiiiiiiiiiiiii..iiiiiiiiiiiii............iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii............iiiiiiiiiiiiiii..iiiiiiiiiiiiii............iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii............iiiiiiiiiiiiiiii..iiiiiiiiiiiiiii............iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii............iiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiii.............iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii.............iiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiii..............iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..............iiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiii...............iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii...............iiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiii...............iiiiiiiiiiiiiiiiiiiiiiiiiiiiii...............iiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiii.................iiiiiiiiiiiiiiiiiiiiiiii.................iiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiii..................iiiiiiiiiiiiiiiiiiii..................iiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiii....................iiiiiiiiiiii....................iiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiii.......................iiiiii.....................iiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiii......................iiiiii....................iiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiii....................iiiiii..................iiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiii...................iiiiii.................iiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiii.................iiiiii...............iiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiii...............iiiiii.............iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii............iiiiii..........iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii.........iiiiii.......iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii....iiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii.....................................................................................................";
    var tenramp_map =".....................................................................................................iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii.....................................................................................................";
    var fourblocks_map = "...................................................iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiii..........iiiiiiiiiiiiiiiii.........iiiiii..iiiiii..........iiiiiiiiiiiiiiiii.........iiiiii..iiiiii..........iiiiiiiiiiiiiiiii.........iiiiii..iiiiii..........iiiiiiiiiiiiiiiii.........iiiiii..iiiiii..........iiiiiiiiiiiiiiiii.........iiiiii..iiiiii..........iiiiiiiiiiiiiiiii.........iiiiii..iiiiii..........iiiiiiiiiiiiiiiii.........iiiiii..iiiiii..........iiiiiiiiiiiiiiiii.........iiiiii..iiiiii..........iiiiiiiiiiiiiiiii.........iiiiii..iiiiii..........iiiiiiiiiiiiiiiii.........iiiiii..iiiiii..........iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiii..........iiiiiiiiiiiiiiii..........iiiiii..iiiiii..........iiiiiiiiiiiiiiii..........iiiiii..iiiiii..........iiiiiiiiiiiiiiii..........iiiiii..iiiiii..........iiiiiiiiiiiiiiii..........iiiiii..iiiiii..........iiiiiiiiiiiiiiii..........iiiiii..iiiiii..........iiiiiiiiiiiiiiii..........iiiiii..iiiiii..........iiiiiiiiiiiiiiii..........iiiiii..iiiiii..........iiiiiiiiiiiiiiii..........iiiiii..iiiiii..........iiiiiiiiiiiiiiii..........iiiiii..iiiiii..........iiiiiiiiiiiiiiii..........iiiiii..iiiiii..........iiiiiiiiiiiiiiii..........iiiiii..iiiiii..........iiiiiiiiiiiiiiii..........iiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii...................................................";
    var maze_map = "...................................................iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..ii.....................ii.....................ii..ii.iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii.ii..ii.iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii.ii..ii.ii......ii......................ii......ii.ii..ii.ii.iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii.ii.ii..ii.ii.iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii.iiiii..ii.ii.ii...............ii...............ii.iiiii..iiiii.ii.iiiiiiiiiiiiiiiiiiiiiiiiiiiiii.ii.ii.ii..iiiii.ii.iiiiiiiiiiiiiiiiiiiiiiiiiiiiii.ii.ii.ii..ii.ii.iiiii..ii..................ii..ii.ii.ii.ii..ii.ii.iiiii.iiiiiiiiiiiiiiiiiiiiiiii.ii.ii.ii.ii..ii.ii.ii.ii.iiiiiiiiiiiiiiiiiiiiiiii.ii.ii.ii.ii..ii.ii.ii.ii.ii.........ii.........ii.ii.ii.ii.ii..ii.ii.ii.ii.ii.iiiiiiiiiiiiiiiiii.ii.iiiii.ii.ii..ii.ii.ii.ii.ii.iiiiiiiiiiiiiiiiii.ii.iiiii.ii.ii..ii.ii.ii.ii.ii.ii..............ii.ii.ii.ii.ii.ii..ii.ii.ii.ii.ii.ii.iiiiiiiiiiii.ii.ii.ii.ii.ii.ii..ii.ii.ii.ii.ii.ii.iiiiiiiiiiii.ii.ii.ii.ii.ii.ii..ii.ii.ii.ii.ii.ii.iiiiiiiiiiii.ii.ii.ii.ii.ii.ii..ii.ii.ii.ii.ii.ii.iiiiiiiiiiii.ii.ii.ii.ii.ii.ii..ii.ii.ii.ii.ii.ii.iiiiiiiiiiii.ii.ii.ii.ii.ii.ii..ii.iiiii.iiiii.iiiiiiiiiiiiiiiiii.iiiii.iiiii.ii..ii.iiiii.iiiii.iiiiiiiiiiiiiiiiii.iiiii.iiiii.ii..ii.ii.ii.ii.ii.ii.iiiiiiiiiiii.ii.ii.ii.ii.ii.ii..ii.ii.ii.ii.ii.ii.iiiiiiiiiiii.ii.ii.ii.ii.ii.ii..ii.ii.ii.ii.ii.ii.iiiiiiiiiiii.ii.ii.ii.ii.ii.ii..ii.ii.ii.ii.ii.ii.iiiiiiiiiiii.ii.ii.ii.ii.ii.ii..ii.ii.ii.ii.ii.ii.iiiiiiiiiiii.ii.ii.ii.ii.ii.ii..ii.ii.ii.ii.ii.ii..............ii.ii.ii.ii.ii.ii..ii.ii.ii.ii.ii.iiiiiiiiiiiiiiiiii.ii.iiiii.ii.ii..ii.ii.ii.ii.ii.iiiiiiiiiiiiiiiiii.ii.iiiii.ii.ii..ii.ii.iiiii.ii..........ii........ii.ii.ii.ii.ii..ii.ii.iiiii.iiiiiiiiiiiiiiiiiiiiiiii.ii.ii.ii.ii..ii.ii.ii.ii.iiiiiiiiiiiiiiiiiiiiiiii.ii.ii.ii.ii..ii.ii.ii.ii..ii..................ii..ii.ii.ii.ii..ii.ii.ii.iiiiiiiiiiiiiiiiiiiiiiiiiiiiii.ii.ii.ii..ii.ii.ii.iiiiiiiiiiiiiiiiiiiiiiiiiiiiii.ii.ii.ii..iiiii.ii................ii..............ii.ii.ii..iiiii.iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii.ii.ii..ii.ii.iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii.iiiii..ii.ii......ii........................ii....iiiii..ii.iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii.ii..ii.iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii.ii..ii......................ii....................ii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii..iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii...................................................";
    $scope.simpleObString=squares_map;
    $scope.simpleObArray =[];
    //for the 50x50 obarray
    for (var i=0;i<$scope.simpleObString.length;i++) {
		if ($scope.simpleObString[i] !== "i") {
			$scope.simpleObArray.push(i);
			}
		}; 
		//console.log($scope.simpleObArray[395]);
    socket = new WebSocket('ws://localhost:8080/websocket');
    var json = JSON.stringify({"type":"setup","arrity":$scope.arrity,"swarmSize":$scope.swarmSize,"popSize":$scope.popSize,"obArray":$scope.simpleObArray,"items":$scope.foodAmount});
    $scope.inspectList = [];
    socket.onopen = function() {
      socket.send(json);

      // this is in the event of a reply coming back
      socket.onmessage = function(evt) {
      // parse the data from the reply json object
      var data = JSON.parse(evt.data);

      // update the grid visulaisation
      // draw the grid
      var gridInfo = data.pop();
      //console.log(gridInfo);
      setup_grid(gridInfo.rows,gridInfo.tileSize,$scope.gridScale,gridInfo.obs);
      draw_circles(data,$scope.gridScale,$scope);
      };
    };
    
    // Yes it's a bit repetitive
    $scope.update = function() {
    // its not very elegant ... but I need to put the images back for the textures
    d3.select("svg").html('<defs><pattern id="grass" x="0" y="0" height="64" width="64" patternUnits="userSpaceOnUse" ><image height="64" width="64" xlink:href="img/grasstile.jpg"></image></pattern><pattern id="brick" x="0" y="0" height="50" width="50" patternUnits="userSpaceOnUse" ><image height="50" width="50" xlink:href="img/bricktile.jpg"></image></pattern></defs>');
    
    var new_json = JSON.stringify({"type":"setup",
      "arrity":$scope.arrity,
      "swarmSize":$scope.swarmSize,
      "popSize":$scope.popSize,
      "obArray":$scope.simpleObArray,
      "items":$scope.foodAmount
      });
      
    if (socket.readyState != 0) {
      socket.send(new_json);
    };
    
    socket.onmessage = function(evt) {
      // the onmessage event hook triggers this
      var data = JSON.parse(evt.data);
      // draw the grid
      var gridInfo = data.pop();
      setup_grid(gridInfo.rows,gridInfo.tileSize,$scope.gridScale,gridInfo.obs);
      draw_circles(data,$scope.gridScale,$scope);
      };
    };

      $scope.start = function() {
	//runningflag is used to manage ng-disable on html elements
	$scope.runningFlag=!$scope.runningFlag;
	
	var startjson = JSON.stringify({"type":"start"});
	  socket.send(startjson);
	  //dont care about the return
	  socket.onmessage = function (x) {;};
	  
	  var dummy_json = JSON.stringify({"type":"report"});
	    //This sends the "update" message to the socket every X ms
	    // and updates the circles with the recived data
	    setInterval(function() {doUpdate()},600);
	      
	    function doUpdate() {
	      socket.send(dummy_json);
	      socket.onmessage = function(evt) {
		var report_json = JSON.parse(evt.data);
		update_circles(report_json,$scope.gridScale,$scope.swarmSize,$scope);
		$scope.realInspectList =[];
		for (var i =0;i<$scope.inspectList.length;i++){
		  $scope.realInspectList.push(report_json[(report_json.map(function(e) { return e.id; }).indexOf($scope.inspectList[i].id))]);
		};
		update_web($scope.realInspectList,$scope.gridScale,$scope);
		$scope.$apply();
	      };  
	    };
      };
  
  $scope.pause = function() {
    $scope.runningFlag=!$scope.runningFlag;
    var pausejson = JSON.stringify({"type":"pause"});
    socket.send(pausejson);
    socket.onmessage = function (x) {;};
  };
  
  }]);//end of 'PanelController'  
  
})();
